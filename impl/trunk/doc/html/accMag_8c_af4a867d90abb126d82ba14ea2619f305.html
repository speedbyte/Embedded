<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>MasterQuad 2015: l_writeI2cByteStream_bl</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="HElikopter_Logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MasterQuad 2015
   </div>
   <div id="projectbrief">Quadrocopter controlled by Raspberry Pi</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('accMag_8c_af4a867d90abb126d82ba14ea2619f305.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<a class="anchor" id="af4a867d90abb126d82ba14ea2619f305"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int l_writeI2cByteStream_bl </td>
          <td>(</td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>f_startRegisterAddr_ui8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *const&#160;</td>
          <td class="paramname"><em>f_byteStreamToWrite_pui8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>f_numOfBytes_ui32</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper function to write a single byte register of LSM303D. </p>
<hr/>
 <dl class="section author"><dt>Author</dt><dd>Juergen Schmidt (juscgs00) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2014/05/05</dd></dl>
<p>This function is a wrapper to the I2C Interface to write one single byte to a register of the Accelerometer/Magnetometer (LSM303D). It eases the concatenation of register address and data byte to transmit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">f_registerAddr_ui8</td><td>specifies the register address to return </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_byteToWrite_ui8</td><td>specifies the single byte to write </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">returns</td><td>a boolean value, indicating the occurrence of failures<br />
 0 .... indicates success (no errors)<br />
 1 .... indicates failed (some errors)</td></tr>
  </table>
  </dd>
</dl>
<hr/>
 <dl class="section author"><dt>Author</dt><dd>Juergen Schmidt (juscgs00) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2014/05/08</dd></dl>
<p>Wrapper function to write byte stream to registers of LSM303D</p>
<p>This function is a wrapper to the I2C Interface to write a byte stream to a series of registers of the Accelerometer/ Magnetometer (LSM303D). The first register address can be defined in the parameter list of the function. After writing the first byte to the start address, the register address will be incremented.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">f_startRegisterAddr_ui8</td><td>specifies the first register address to return </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">f_byteStreamToWrite_pui8</td><td>points to an array of unsigned 8bit data elements (input byte stream buffer) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">returns</td><td>a boolean value, indicating the occurrence of failures<br />
 0 .... indicates success (no errors)<br />
 1 .... indicates failed (some errors)</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="accMag_8c_source.html#l00207">207</a> of file <a class="el" href="accMag_8c_source.html">accMag.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    l_writeSucceeded_bl     = <a class="code" href="accMag_8h_a244c94ee3b75087140235cf4f913623f.html#a244c94ee3b75087140235cf4f913623f">M_HAL_ACCMAG_SUCCESS_BL</a>;  <span class="comment">// success state as default</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   l_bufCtr_ui8            = 0;                        <span class="comment">// loop counter to assemble payload and register address</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   l_byteStreamBuffer_rgXui8[<a class="code" href="accMag_8h_aaa771727c176ae833aea7231c6bd80f0.html#aaa771727c176ae833aea7231c6bd80f0">M_HAL_ACCMAG_WRITE_BYTESTREAM_BUFFER_SIZE_UI8</a>];</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">     * - ensure at least one data byte to write</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">     * - prevent a buffer overflow of l_byteStreamBuffer_rgXui8</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">     *   --&gt; payload data bytes + register address (subaddress)</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (        (f_numOfBytes_ui32 &lt; 1)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            ||  (f_numOfBytes_ui32 &gt; <a class="code" href="accMag_8h_aaa771727c176ae833aea7231c6bd80f0.html#aaa771727c176ae833aea7231c6bd80f0">M_HAL_ACCMAG_WRITE_BYTESTREAM_BUFFER_SIZE_UI8</a>-1) )</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="accMag_8h_a29da5c251bf0c3b1c7ed7da3c3269d9f.html#a29da5c251bf0c3b1c7ed7da3c3269d9f">M_HAL_ACCMAG_FAILED_BL</a>;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">     * prepare data to write (register + data)</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">     * (1) ensure byte stream writing (MSB of register address shall be 1)</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">     *     -&gt; Mask MSB to one!</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">     *     -&gt; LSM303D will auto-increment the register address for each byte</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">     *        of data</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">     * (2) copy data to write to local buffer, start at second byte position</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">     *     (first byte position is the register address)</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    l_byteStreamBuffer_rgXui8[0] = f_startRegisterAddr_ui8 | 0b10000000;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">for</span>(l_bufCtr_ui8=0; l_bufCtr_ui8 &lt; f_numOfBytes_ui32; l_bufCtr_ui8++)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        l_byteStreamBuffer_rgXui8[l_bufCtr_ui8+1] = f_byteStreamToWrite_pui8[l_bufCtr_ui8];</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">//write register to I2C</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> ( <a class="code" href="LLD__I2C_8c_aa6892bf4aea7f232d9b0ff2dbf8a9321.html#aa6892bf4aea7f232d9b0ff2dbf8a9321">g_lldI2c_WriteI2c_bl</a>(<a class="code" href="accMag_8h_a6c9acfcf0f8dff7a5789ddb4960b3599.html#a6c9acfcf0f8dff7a5789ddb4960b3599">M_HAL_ACCMAG_I2CADDR_UI8</a>, l_byteStreamBuffer_rgXui8, f_numOfBytes_ui32 + 1) != <a class="code" href="accMag_8h_a244c94ee3b75087140235cf4f913623f.html#a244c94ee3b75087140235cf4f913623f">M_HAL_ACCMAG_SUCCESS_BL</a> )</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment">// error in I2C access</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        l_writeSucceeded_bl = <a class="code" href="accMag_8h_a29da5c251bf0c3b1c7ed7da3c3269d9f.html#a29da5c251bf0c3b1c7ed7da3c3269d9f">M_HAL_ACCMAG_FAILED_BL</a>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> l_writeSucceeded_bl;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="ttc" id="accMag_8h_a29da5c251bf0c3b1c7ed7da3c3269d9f_html_a29da5c251bf0c3b1c7ed7da3c3269d9f"><div class="ttname"><a href="accMag_8h_a29da5c251bf0c3b1c7ed7da3c3269d9f.html#a29da5c251bf0c3b1c7ed7da3c3269d9f">M_HAL_ACCMAG_FAILED_BL</a></div><div class="ttdeci">#define M_HAL_ACCMAG_FAILED_BL</div><div class="ttdef"><b>Definition:</b> <a href="accMag_8h_source.html#l00014">accMag.h:14</a></div></div>
<div class="ttc" id="LLD__I2C_8c_aa6892bf4aea7f232d9b0ff2dbf8a9321_html_aa6892bf4aea7f232d9b0ff2dbf8a9321"><div class="ttname"><a href="LLD__I2C_8c_aa6892bf4aea7f232d9b0ff2dbf8a9321.html#aa6892bf4aea7f232d9b0ff2dbf8a9321">g_lldI2c_WriteI2c_bl</a></div><div class="ttdeci">unsigned int g_lldI2c_WriteI2c_bl(unsigned char f_lldI2c_i2cSlaveAddress_ui8, const unsigned char *f_i2cWriteBuffer_pui8, unsigned int f_i2cNumOfDataBytes_ui32)</div><div class="ttdoc">Write-function for I2C Bus. </div><div class="ttdef"><b>Definition:</b> <a href="LLD__I2C_8c_source.html#l00043">LLD_I2C.c:43</a></div></div>
<div class="ttc" id="accMag_8h_a244c94ee3b75087140235cf4f913623f_html_a244c94ee3b75087140235cf4f913623f"><div class="ttname"><a href="accMag_8h_a244c94ee3b75087140235cf4f913623f.html#a244c94ee3b75087140235cf4f913623f">M_HAL_ACCMAG_SUCCESS_BL</a></div><div class="ttdeci">#define M_HAL_ACCMAG_SUCCESS_BL</div><div class="ttdef"><b>Definition:</b> <a href="accMag_8h_source.html#l00013">accMag.h:13</a></div></div>
<div class="ttc" id="accMag_8h_aaa771727c176ae833aea7231c6bd80f0_html_aaa771727c176ae833aea7231c6bd80f0"><div class="ttname"><a href="accMag_8h_aaa771727c176ae833aea7231c6bd80f0.html#aaa771727c176ae833aea7231c6bd80f0">M_HAL_ACCMAG_WRITE_BYTESTREAM_BUFFER_SIZE_UI8</a></div><div class="ttdeci">#define M_HAL_ACCMAG_WRITE_BYTESTREAM_BUFFER_SIZE_UI8</div><div class="ttdoc">defines the local write buffer of function l_writeI2cByteStream_bl </div><div class="ttdef"><b>Definition:</b> <a href="accMag_8h_source.html#l00016">accMag.h:16</a></div></div>
<div class="ttc" id="accMag_8h_a6c9acfcf0f8dff7a5789ddb4960b3599_html_a6c9acfcf0f8dff7a5789ddb4960b3599"><div class="ttname"><a href="accMag_8h_a6c9acfcf0f8dff7a5789ddb4960b3599.html#a6c9acfcf0f8dff7a5789ddb4960b3599">M_HAL_ACCMAG_I2CADDR_UI8</a></div><div class="ttdeci">#define M_HAL_ACCMAG_I2CADDR_UI8</div><div class="ttdoc">I2C chip address of LSM303D (Acceleration & Compass sensor) </div><div class="ttdef"><b>Definition:</b> <a href="accMag_8h_source.html#l00020">accMag.h:20</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="accMag_8c_af4a867d90abb126d82ba14ea2619f305_af4a867d90abb126d82ba14ea2619f305_cgraph.png" border="0" usemap="#accMag_8c_af4a867d90abb126d82ba14ea2619f305_af4a867d90abb126d82ba14ea2619f305_cgraph" alt=""/></div>
<map name="accMag_8c_af4a867d90abb126d82ba14ea2619f305_af4a867d90abb126d82ba14ea2619f305_cgraph" id="accMag_8c_af4a867d90abb126d82ba14ea2619f305_af4a867d90abb126d82ba14ea2619f305_cgraph">
<area shape="rect" id="node2" href="LLD__I2C_8c_aa6892bf4aea7f232d9b0ff2dbf8a9321.html#aa6892bf4aea7f232d9b0ff2dbf8a9321" title="Write&#45;function for I2C Bus. " alt="" coords="217,5,357,32"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="accMag_8c_af4a867d90abb126d82ba14ea2619f305_af4a867d90abb126d82ba14ea2619f305_icgraph.png" border="0" usemap="#accMag_8c_af4a867d90abb126d82ba14ea2619f305_af4a867d90abb126d82ba14ea2619f305_icgraph" alt=""/></div>
<map name="accMag_8c_af4a867d90abb126d82ba14ea2619f305_af4a867d90abb126d82ba14ea2619f305_icgraph" id="accMag_8c_af4a867d90abb126d82ba14ea2619f305_af4a867d90abb126d82ba14ea2619f305_icgraph">
<area shape="rect" id="node2" href="accMag_8h_ab936c0ac53ff9ba47a138e841a6ba474.html#ab936c0ac53ff9ba47a138e841a6ba474" title="Initialize sensor. " alt="" coords="217,5,400,32"/><area shape="rect" id="node3" href="imu_8h_af6233b68a4e1e91a12422028d7657328.html#af6233b68a4e1e91a12422028d7657328" title="Initialize all sensors. " alt="" coords="448,5,635,32"/><area shape="rect" id="node4" href="Imufilter_8h_a04ced184c1622d6ae5c947f73e1d752f.html#a04ced184c1622d6ae5c947f73e1d752f" title="Bypass the initialization of the IMU. " alt="" coords="683,5,863,32"/><area shape="rect" id="node5" href="Orientation_8h_aa0c1eb4474b4c8e0d3d09e3b09b66452.html#aa0c1eb4474b4c8e0d3d09e3b09b66452" title="Bypass the initialization of the IMU. " alt="" coords="911,5,1092,32"/><area shape="rect" id="node6" href="main_8c_a840291bc02cba5474a4cb46a9b9566fe.html#a840291bc02cba5474a4cb46a9b9566fe" title="main" alt="" coords="1140,5,1191,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_52c912f73dac9c4c0e442232e1b2bd80.html">hal</a></li><li class="navelem"><a class="el" href="dir_567a655b0fa573a35215ed42c39ab0f2.html">IMU</a></li><li class="navelem"><a class="el" href="dir_26e7a40b6325fde2627693c409933e9f.html">accMag</a></li><li class="navelem"><a class="el" href="accMag_8c.html">accMag.c</a></li>
    <li class="footer">Generated on Sun Jun 28 2015 17:23:45 for MasterQuad 2015 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
