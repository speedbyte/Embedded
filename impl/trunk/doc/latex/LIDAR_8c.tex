\hypertarget{LIDAR_8c}{\section{hal/\+Laser/\+L\+I\+D\+A\+R.c File Reference}
\label{LIDAR_8c}\index{hal/\+Laser/\+L\+I\+D\+A\+R.\+c@{hal/\+Laser/\+L\+I\+D\+A\+R.\+c}}
}
{\ttfamily \#include \char`\"{}../\+L\+L\+D\+\_\+\+I\+F/\+L\+L\+D\+\_\+\+I2\+C.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}L\+I\+D\+A\+R.\+h\char`\"{}}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdint.\+h$>$}\\*
Include dependency graph for L\+I\+D\+A\+R.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{LIDAR_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{LIDAR_8c_a98c326e9a6bbbcee4f89564bb675a5e2_a98c326e9a6bbbcee4f89564bb675a5e2}{g\+\_\+\+L\+I\+D\+A\+R\+\_\+get\+Distance\+\_\+f64} (void)
\begin{DoxyCompactList}\small\item\em get Distance from L\+I\+D\+A\+R Laser Sensor \end{DoxyCompactList}\item 
int \hyperlink{LIDAR_8c_a12850697b23f092283dac8ec64062940_a12850697b23f092283dac8ec64062940}{g\+\_\+\+L\+I\+D\+A\+R\+\_\+read\+Distance\+From\+I2\+C\+\_\+i32} (void)
\begin{DoxyCompactList}\small\item\em Trigger I2\+C transfer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static double \hyperlink{LIDAR_8c_ad74153a4d882a950a66d852ff1e6a509_ad74153a4d882a950a66d852ff1e6a509}{m\+\_\+distance\+\_\+f64}
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{LIDAR_8c_a98c326e9a6bbbcee4f89564bb675a5e2_a98c326e9a6bbbcee4f89564bb675a5e2}{\index{L\+I\+D\+A\+R.\+c@{L\+I\+D\+A\+R.\+c}!g\+\_\+\+L\+I\+D\+A\+R\+\_\+get\+Distance\+\_\+f64@{g\+\_\+\+L\+I\+D\+A\+R\+\_\+get\+Distance\+\_\+f64}}
\index{g\+\_\+\+L\+I\+D\+A\+R\+\_\+get\+Distance\+\_\+f64@{g\+\_\+\+L\+I\+D\+A\+R\+\_\+get\+Distance\+\_\+f64}!L\+I\+D\+A\+R.\+c@{L\+I\+D\+A\+R.\+c}}
\subsubsection[{g\+\_\+\+L\+I\+D\+A\+R\+\_\+get\+Distance\+\_\+f64}]{\setlength{\rightskip}{0pt plus 5cm}double g\+\_\+\+L\+I\+D\+A\+R\+\_\+get\+Distance\+\_\+f64 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{LIDAR_8c_a98c326e9a6bbbcee4f89564bb675a5e2_a98c326e9a6bbbcee4f89564bb675a5e2}


get Distance from L\+I\+D\+A\+R Laser Sensor 



 \begin{DoxyAuthor}{Author}
Philipp Woditsch ( phwogs00 ) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2015/06/21
\end{DoxyDate}
Interface to read Distance measured by L\+I\+D\+A\+R Lite Laser Sensor


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em no} & parameter \\
\hline
\mbox{\tt out}  & {\em distance} & of Laser Sensor\\
\hline
\end{DoxyParams}


Definition at line 31 of file L\+I\+D\+A\+R.\+c.


\begin{DoxyCode}
32 \{
33     \textcolor{keywordflow}{return} \hyperlink{LIDAR_8c_ad74153a4d882a950a66d852ff1e6a509_ad74153a4d882a950a66d852ff1e6a509}{m\_distance\_f64};
34 \}
\end{DoxyCode}
\hypertarget{LIDAR_8c_a12850697b23f092283dac8ec64062940_a12850697b23f092283dac8ec64062940}{\index{L\+I\+D\+A\+R.\+c@{L\+I\+D\+A\+R.\+c}!g\+\_\+\+L\+I\+D\+A\+R\+\_\+read\+Distance\+From\+I2\+C\+\_\+i32@{g\+\_\+\+L\+I\+D\+A\+R\+\_\+read\+Distance\+From\+I2\+C\+\_\+i32}}
\index{g\+\_\+\+L\+I\+D\+A\+R\+\_\+read\+Distance\+From\+I2\+C\+\_\+i32@{g\+\_\+\+L\+I\+D\+A\+R\+\_\+read\+Distance\+From\+I2\+C\+\_\+i32}!L\+I\+D\+A\+R.\+c@{L\+I\+D\+A\+R.\+c}}
\subsubsection[{g\+\_\+\+L\+I\+D\+A\+R\+\_\+read\+Distance\+From\+I2\+C\+\_\+i32}]{\setlength{\rightskip}{0pt plus 5cm}int g\+\_\+\+L\+I\+D\+A\+R\+\_\+read\+Distance\+From\+I2\+C\+\_\+i32 (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{LIDAR_8c_a12850697b23f092283dac8ec64062940_a12850697b23f092283dac8ec64062940}


Trigger I2\+C transfer. 



 \begin{DoxyAuthor}{Author}
Philipp Woditsch ( phwogs00 ) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2015/06/21
\end{DoxyDate}
Trigger Distance transfer from L\+I\+D\+A\+R to H\+A\+L


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em no} & parameter \\
\hline
\mbox{\tt out}  & {\em succeeded} & \\
\hline
\end{DoxyParams}


Definition at line 53 of file L\+I\+D\+A\+R.\+c.


\begin{DoxyCode}
54 \{
55 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} l\_ReadBuffer\_ui8[2]=\{0,0\};
56 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} l\_WriteBuffer\_ui8[2]=\{0,0\};
57 \textcolor{keywordtype}{int} l\_DistInCm\_i32 =  0;
58 
59 \textcolor{comment}{//Trigger Measurement of Distance (DC stabnilization cycle, Signal Acquisition, DataProcessing)}
60 l\_WriteBuffer\_ui8[0]=0x00;                              \textcolor{comment}{//write Reg 0x00}
61 l\_WriteBuffer\_ui8[1]=0x04;                              \textcolor{comment}{//with value 0x04}
62 \textcolor{keywordflow}{if}(\hyperlink{LLD__I2C_8c_a8b130e9580447cad3fde20b915bfefec_a8b130e9580447cad3fde20b915bfefec}{g\_lldI2c\_WriteI2c0\_bl}(\hyperlink{LIDAR_8h_ac413f279a777369bd1871dc431510256_ac413f279a777369bd1871dc431510256}{M\_I2C\_SLAVE\_ADDRESS\_LIDAR\_UI8}, 
      l\_WriteBuffer\_ui8, 2)!=0)
63 \{
64 \textcolor{keywordflow}{return} -1;
65 \}
66 
67 \textcolor{comment}{//Waiting Time for Acquisition}
68 usleep(20*1000);
69 
70 
71 \textcolor{comment}{//Set Acquisition count cycle to 255}
72 l\_WriteBuffer\_ui8[0]=0x02;
73 l\_WriteBuffer\_ui8[1]=0xFF;
74 \textcolor{keywordflow}{if}(\hyperlink{LLD__I2C_8c_a8b130e9580447cad3fde20b915bfefec_a8b130e9580447cad3fde20b915bfefec}{g\_lldI2c\_WriteI2c0\_bl}(\hyperlink{LIDAR_8h_ac413f279a777369bd1871dc431510256_ac413f279a777369bd1871dc431510256}{M\_I2C\_SLAVE\_ADDRESS\_LIDAR\_UI8}, 
      l\_WriteBuffer\_ui8, 2)!=0)
75 \{
76 \textcolor{keywordflow}{return} -1;
77 \}
78 
79 \textcolor{comment}{//Set Reg 0x8f as Output-Register}
80 l\_WriteBuffer\_ui8[0]=0x8f;
81 \textcolor{keywordflow}{if}(\hyperlink{LLD__I2C_8c_a8b130e9580447cad3fde20b915bfefec_a8b130e9580447cad3fde20b915bfefec}{g\_lldI2c\_WriteI2c0\_bl}(\hyperlink{LIDAR_8h_ac413f279a777369bd1871dc431510256_ac413f279a777369bd1871dc431510256}{M\_I2C\_SLAVE\_ADDRESS\_LIDAR\_UI8}, 
      l\_WriteBuffer\_ui8, 1)!=0)
82 \{
83 \textcolor{keywordflow}{return} -1;
84 \}
85 
86 \textcolor{comment}{//Read 2-Byte Distance in cm from Register 0x8f}
87 \textcolor{keywordflow}{if}(\hyperlink{LLD__I2C_8c_aeaca94687ce58a90a4d0fb44f1ea829e_aeaca94687ce58a90a4d0fb44f1ea829e}{g\_lldI2c\_ReadI2c0\_bl}(\hyperlink{LIDAR_8h_ac413f279a777369bd1871dc431510256_ac413f279a777369bd1871dc431510256}{M\_I2C\_SLAVE\_ADDRESS\_LIDAR\_UI8}, (
      l\_ReadBuffer\_ui8), 2)!=0)
88 \{
89 \textcolor{keywordflow}{return} -1;
90 \}
91 
92 \textcolor{comment}{//Conversion from int(cm) to double(m)}
93 l\_DistInCm\_i32 = *l\_ReadBuffer\_ui8 << 8;
94 l\_DistInCm\_i32 |= *(l\_ReadBuffer\_ui8+1);
95 \hyperlink{LIDAR_8c_ad74153a4d882a950a66d852ff1e6a509_ad74153a4d882a950a66d852ff1e6a509}{m\_distance\_f64} = (double)l\_DistInCm\_i32;
96 \hyperlink{LIDAR_8c_ad74153a4d882a950a66d852ff1e6a509_ad74153a4d882a950a66d852ff1e6a509}{m\_distance\_f64} = (\hyperlink{LIDAR_8c_ad74153a4d882a950a66d852ff1e6a509_ad74153a4d882a950a66d852ff1e6a509}{m\_distance\_f64}/100);
97 \textcolor{comment}{//printf("Distance: %d / %.2f\(\backslash\)n",l\_DistInCm\_i32,m\_distance\_f64);}
98 \textcolor{comment}{//usleep(500*1000);}
99 
100 
101 \textcolor{keywordflow}{return} 0;
102 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{LIDAR_8c_a12850697b23f092283dac8ec64062940_a12850697b23f092283dac8ec64062940_cgraph}
\end{center}
\end{figure}




\subsection{Variable Documentation}
\hypertarget{LIDAR_8c_ad74153a4d882a950a66d852ff1e6a509_ad74153a4d882a950a66d852ff1e6a509}{\index{L\+I\+D\+A\+R.\+c@{L\+I\+D\+A\+R.\+c}!m\+\_\+distance\+\_\+f64@{m\+\_\+distance\+\_\+f64}}
\index{m\+\_\+distance\+\_\+f64@{m\+\_\+distance\+\_\+f64}!L\+I\+D\+A\+R.\+c@{L\+I\+D\+A\+R.\+c}}
\subsubsection[{m\+\_\+distance\+\_\+f64}]{\setlength{\rightskip}{0pt plus 5cm}double m\+\_\+distance\+\_\+f64\hspace{0.3cm}{\ttfamily [static]}}}\label{LIDAR_8c_ad74153a4d882a950a66d852ff1e6a509_ad74153a4d882a950a66d852ff1e6a509}


Definition at line 11 of file L\+I\+D\+A\+R.\+c.

