\hypertarget{Imufilter_8h}{\section{sig/\+Imu\+Filter/\+Imufilter.h File Reference}
\label{Imufilter_8h}\index{sig/\+Imu\+Filter/\+Imufilter.\+h@{sig/\+Imu\+Filter/\+Imufilter.\+h}}
}
{\ttfamily \#include \char`\"{}../../hal/\+I\+M\+U/imu.\+h\char`\"{}}\\*
Include dependency graph for Imufilter.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=276pt]{Imufilter_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=218pt]{Imufilter_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structhalImu__orientationValues}{hal\+Imu\+\_\+orientation\+Values} \hyperlink{Imufilter_8h_a9e97af96eeadda13410f0b21cfe7b1f2_a9e97af96eeadda13410f0b21cfe7b1f2}{g\+\_\+sig\+Fil\+\_\+get\+Imu\+Values\+Unfiltered\+\_\+st} (void)
\begin{DoxyCompactList}\small\item\em Get unfiltered state of the I\+M\+U. \end{DoxyCompactList}\item 
unsigned int \hyperlink{Imufilter_8h_a04ced184c1622d6ae5c947f73e1d752f_a04ced184c1622d6ae5c947f73e1d752f}{g\+\_\+\+Sig\+Fil\+\_\+init\+Imu\+Sensors\+\_\+bl} (void)
\begin{DoxyCompactList}\small\item\em Bypass the initialization of the I\+M\+U. \end{DoxyCompactList}\item 
void \hyperlink{Imufilter_8h_a092ccb8dc97da30e6d9b72a2ce9a999e_a092ccb8dc97da30e6d9b72a2ce9a999e}{g\+\_\+sig\+Fil\+\_\+read\+Imu\+Data\+\_\+bl} (void)
\begin{DoxyCompactList}\small\item\em Trigger I\+M\+U reading. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{Imufilter_8h_a9e97af96eeadda13410f0b21cfe7b1f2_a9e97af96eeadda13410f0b21cfe7b1f2}{\index{Imufilter.\+h@{Imufilter.\+h}!g\+\_\+sig\+Fil\+\_\+get\+Imu\+Values\+Unfiltered\+\_\+st@{g\+\_\+sig\+Fil\+\_\+get\+Imu\+Values\+Unfiltered\+\_\+st}}
\index{g\+\_\+sig\+Fil\+\_\+get\+Imu\+Values\+Unfiltered\+\_\+st@{g\+\_\+sig\+Fil\+\_\+get\+Imu\+Values\+Unfiltered\+\_\+st}!Imufilter.\+h@{Imufilter.\+h}}
\subsubsection[{g\+\_\+sig\+Fil\+\_\+get\+Imu\+Values\+Unfiltered\+\_\+st}]{\setlength{\rightskip}{0pt plus 5cm}{\bf hal\+Imu\+\_\+orientation\+Values} g\+\_\+sig\+Fil\+\_\+get\+Imu\+Values\+Unfiltered\+\_\+st (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{Imufilter_8h_a9e97af96eeadda13410f0b21cfe7b1f2_a9e97af96eeadda13410f0b21cfe7b1f2}


Get unfiltered state of the I\+M\+U. 



 \begin{DoxyAuthor}{Author}
Oliver Breuning (olbrgs00) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2015/05/31
\end{DoxyDate}
This function returns a struct with all measured I\+M\+U values (Barometer, Acc\+Mag, Gyro). The Gyro value is offset corrected. The magnitude value is changed in its unit from Tesla to µ\+Tesla. The Z-\/axis from Acceleration sensor and magnitude sensor is 180° rotated. Attention\+: Initialization of the I\+M\+U and Triggering of a new measurement of all chips according to their update rate has to be done before reading 1.) \hyperlink{ImuFilter_8c_a00a5129f63ea600756b5c8e4d9fd5bda_a00a5129f63ea600756b5c8e4d9fd5bda}{g\+\_\+\+Sig\+Fil\+\_\+init\+Imu\+Sensors\+\_\+bl()} 2.) \hyperlink{ImuFilter_8c_ade4c986277e5b4d3de67cf4e971148d4_ade4c986277e5b4d3de67cf4e971148d4}{g\+\_\+sig\+Fil\+\_\+read\+Imu\+Data\+\_\+bl()}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em returns} & the requested I\+M\+U data\\
\hline
\end{DoxyParams}


Definition at line 43 of file Imu\+Filter.\+c.


\begin{DoxyCode}
44 \{
45     \textcolor{keywordflow}{return} \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st};
46 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Imufilter_8h_a9e97af96eeadda13410f0b21cfe7b1f2_a9e97af96eeadda13410f0b21cfe7b1f2_icgraph}
\end{center}
\end{figure}


\hypertarget{Imufilter_8h_a04ced184c1622d6ae5c947f73e1d752f_a04ced184c1622d6ae5c947f73e1d752f}{\index{Imufilter.\+h@{Imufilter.\+h}!g\+\_\+\+Sig\+Fil\+\_\+init\+Imu\+Sensors\+\_\+bl@{g\+\_\+\+Sig\+Fil\+\_\+init\+Imu\+Sensors\+\_\+bl}}
\index{g\+\_\+\+Sig\+Fil\+\_\+init\+Imu\+Sensors\+\_\+bl@{g\+\_\+\+Sig\+Fil\+\_\+init\+Imu\+Sensors\+\_\+bl}!Imufilter.\+h@{Imufilter.\+h}}
\subsubsection[{g\+\_\+\+Sig\+Fil\+\_\+init\+Imu\+Sensors\+\_\+bl}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int g\+\_\+\+Sig\+Fil\+\_\+init\+Imu\+Sensors\+\_\+bl (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{Imufilter_8h_a04ced184c1622d6ae5c947f73e1d752f_a04ced184c1622d6ae5c947f73e1d752f}


Bypass the initialization of the I\+M\+U. 



 \begin{DoxyAuthor}{Author}
Oliver Breuning (olbrgs00) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2015/05/31
\end{DoxyDate}
Bypasses the initialization trigger and calls the Offset calculation function


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em none} & \\
\hline
\end{DoxyParams}


Definition at line 101 of file Imu\+Filter.\+c.


\begin{DoxyCode}
102 \{
103     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} l\_initState\_bl;
104 
105     l\_initState\_bl = \hyperlink{imu_8c_af6233b68a4e1e91a12422028d7657328_af6233b68a4e1e91a12422028d7657328}{g\_halImu\_initImuSensors\_bl}();
106     \hyperlink{ImuFilter_8c_af8973e59b53a1b1bb35b73f76509f8e4_af8973e59b53a1b1bb35b73f76509f8e4}{m\_offsetGyro\_st}=\hyperlink{ImuFilter_8c_afcff95cc27d2f6b3f0c218910121c2ab_afcff95cc27d2f6b3f0c218910121c2ab}{m\_sigFil\_offsetCorrectionGyro\_st}();
107 
108     \textcolor{keywordflow}{return} l\_initState\_bl;
109 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Imufilter_8h_a04ced184c1622d6ae5c947f73e1d752f_a04ced184c1622d6ae5c947f73e1d752f_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Imufilter_8h_a04ced184c1622d6ae5c947f73e1d752f_a04ced184c1622d6ae5c947f73e1d752f_icgraph}
\end{center}
\end{figure}


\hypertarget{Imufilter_8h_a092ccb8dc97da30e6d9b72a2ce9a999e_a092ccb8dc97da30e6d9b72a2ce9a999e}{\index{Imufilter.\+h@{Imufilter.\+h}!g\+\_\+sig\+Fil\+\_\+read\+Imu\+Data\+\_\+bl@{g\+\_\+sig\+Fil\+\_\+read\+Imu\+Data\+\_\+bl}}
\index{g\+\_\+sig\+Fil\+\_\+read\+Imu\+Data\+\_\+bl@{g\+\_\+sig\+Fil\+\_\+read\+Imu\+Data\+\_\+bl}!Imufilter.\+h@{Imufilter.\+h}}
\subsubsection[{g\+\_\+sig\+Fil\+\_\+read\+Imu\+Data\+\_\+bl}]{\setlength{\rightskip}{0pt plus 5cm}void g\+\_\+sig\+Fil\+\_\+read\+Imu\+Data\+\_\+bl (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{Imufilter_8h_a092ccb8dc97da30e6d9b72a2ce9a999e_a092ccb8dc97da30e6d9b72a2ce9a999e}


Trigger I\+M\+U reading. 



 \begin{DoxyAuthor}{Author}
Oliver Breuning (olbrgs00) 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2015/05/31
\end{DoxyDate}
Trigger I\+M\+U reading, correct the read value with the offset of the Gyroscope and convert magnitude from Tesla to µ\+Tesla. The Z-\/axis from Acceleration sensor and magnitude sensor gets 180° rotated.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em none} & \\
\hline
\end{DoxyParams}


Definition at line 128 of file Imu\+Filter.\+c.


\begin{DoxyCode}
129 \{
130     \hyperlink{imu_8c_a561a32c02cc4322ecd90c6b1ba31c560_a561a32c02cc4322ecd90c6b1ba31c560}{g\_halImu\_triggerImuReading\_bl}();
131     \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st} = \hyperlink{imu_8c_acdbd7d64a76100064cb9791a9b9d2586_acdbd7d64a76100064cb9791a9b9d2586}{g\_halImu\_getImuValues\_str}();
132 
133     \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_a8080616bd2a3d4f01f5334d4bf05427e_a8080616bd2a3d4f01f5334d4bf05427e}{acc}.\hyperlink{structhalAccmag__3dDoubleVector_a5041b0551694f5f4057a5f3454782e44_a5041b0551694f5f4057a5f3454782e44}{z\_f64}=-
      \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_a8080616bd2a3d4f01f5334d4bf05427e_a8080616bd2a3d4f01f5334d4bf05427e}{acc}.\hyperlink{structhalAccmag__3dDoubleVector_a5041b0551694f5f4057a5f3454782e44_a5041b0551694f5f4057a5f3454782e44}{z\_f64};
134     \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_ac0763bc025ee3aa20f167e74ecccfc3c_ac0763bc025ee3aa20f167e74ecccfc3c}{mag}.\hyperlink{structhalAccmag__3dDoubleVector_a011646ea6f4b78400dfd2ffa8eb45eea_a011646ea6f4b78400dfd2ffa8eb45eea}{x\_f64}=
      \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_ac0763bc025ee3aa20f167e74ecccfc3c_ac0763bc025ee3aa20f167e74ecccfc3c}{mag}.\hyperlink{structhalAccmag__3dDoubleVector_a011646ea6f4b78400dfd2ffa8eb45eea_a011646ea6f4b78400dfd2ffa8eb45eea}{x\_f64}*1000000;
135     \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_ac0763bc025ee3aa20f167e74ecccfc3c_ac0763bc025ee3aa20f167e74ecccfc3c}{mag}.\hyperlink{structhalAccmag__3dDoubleVector_a88f4ed3363ccaa08c00d2fc28f7b2ab4_a88f4ed3363ccaa08c00d2fc28f7b2ab4}{y\_f64}=
      \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_ac0763bc025ee3aa20f167e74ecccfc3c_ac0763bc025ee3aa20f167e74ecccfc3c}{mag}.\hyperlink{structhalAccmag__3dDoubleVector_a88f4ed3363ccaa08c00d2fc28f7b2ab4_a88f4ed3363ccaa08c00d2fc28f7b2ab4}{y\_f64}*1000000;
136     \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_ac0763bc025ee3aa20f167e74ecccfc3c_ac0763bc025ee3aa20f167e74ecccfc3c}{mag}.\hyperlink{structhalAccmag__3dDoubleVector_a5041b0551694f5f4057a5f3454782e44_a5041b0551694f5f4057a5f3454782e44}{z\_f64}=-
      \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_ac0763bc025ee3aa20f167e74ecccfc3c_ac0763bc025ee3aa20f167e74ecccfc3c}{mag}.\hyperlink{structhalAccmag__3dDoubleVector_a5041b0551694f5f4057a5f3454782e44_a5041b0551694f5f4057a5f3454782e44}{z\_f64}*1000000;
137     \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_a386a3509066dbfd830da6b7a993b31da_a386a3509066dbfd830da6b7a993b31da}{gyro}.\hyperlink{structstrGyro_a9d82fa8970135f2097dd209a74138848_a9d82fa8970135f2097dd209a74138848}{l\_pitch\_f64}=
      \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_a386a3509066dbfd830da6b7a993b31da_a386a3509066dbfd830da6b7a993b31da}{gyro}.\hyperlink{structstrGyro_a9d82fa8970135f2097dd209a74138848_a9d82fa8970135f2097dd209a74138848}{l\_pitch\_f64}-
      \hyperlink{ImuFilter_8c_af8973e59b53a1b1bb35b73f76509f8e4_af8973e59b53a1b1bb35b73f76509f8e4}{m\_offsetGyro\_st}.\hyperlink{structstrGyro_a9d82fa8970135f2097dd209a74138848_a9d82fa8970135f2097dd209a74138848}{l\_pitch\_f64};
138     \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_a386a3509066dbfd830da6b7a993b31da_a386a3509066dbfd830da6b7a993b31da}{gyro}.\hyperlink{structstrGyro_a0b8d0c0ec6e3324a403d983d67fae643_a0b8d0c0ec6e3324a403d983d67fae643}{l\_roll\_f64}=
      \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_a386a3509066dbfd830da6b7a993b31da_a386a3509066dbfd830da6b7a993b31da}{gyro}.\hyperlink{structstrGyro_a0b8d0c0ec6e3324a403d983d67fae643_a0b8d0c0ec6e3324a403d983d67fae643}{l\_roll\_f64}-
      \hyperlink{ImuFilter_8c_af8973e59b53a1b1bb35b73f76509f8e4_af8973e59b53a1b1bb35b73f76509f8e4}{m\_offsetGyro\_st}.\hyperlink{structstrGyro_a0b8d0c0ec6e3324a403d983d67fae643_a0b8d0c0ec6e3324a403d983d67fae643}{l\_roll\_f64};
139     \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_a386a3509066dbfd830da6b7a993b31da_a386a3509066dbfd830da6b7a993b31da}{gyro}.\hyperlink{structstrGyro_a1c8ca43d350ad8ef20d2968aa29e6ce6_a1c8ca43d350ad8ef20d2968aa29e6ce6}{l\_yaw\_f64}=
      \hyperlink{ImuFilter_8c_afe58cbb2da08ae505b671ee7a6095c75_afe58cbb2da08ae505b671ee7a6095c75}{m\_sigFil\_imuValues\_st}.\hyperlink{structhalImu__orientationValues_a386a3509066dbfd830da6b7a993b31da_a386a3509066dbfd830da6b7a993b31da}{gyro}.\hyperlink{structstrGyro_a1c8ca43d350ad8ef20d2968aa29e6ce6_a1c8ca43d350ad8ef20d2968aa29e6ce6}{l\_yaw\_f64}-
      \hyperlink{ImuFilter_8c_af8973e59b53a1b1bb35b73f76509f8e4_af8973e59b53a1b1bb35b73f76509f8e4}{m\_offsetGyro\_st}.\hyperlink{structstrGyro_a1c8ca43d350ad8ef20d2968aa29e6ce6_a1c8ca43d350ad8ef20d2968aa29e6ce6}{l\_yaw\_f64};
140 
141 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Imufilter_8h_a092ccb8dc97da30e6d9b72a2ce9a999e_a092ccb8dc97da30e6d9b72a2ce9a999e_cgraph}
\end{center}
\end{figure}




Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Imufilter_8h_a092ccb8dc97da30e6d9b72a2ce9a999e_a092ccb8dc97da30e6d9b72a2ce9a999e_icgraph}
\end{center}
\end{figure}


